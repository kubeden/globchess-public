const _0x5a1a74=_0x493b;(function(_0x40570f,_0x5c646c){const _0x349889=_0x493b,_0x536ee5=_0x40570f();while(!![]){try{const _0x191033=-parseInt(_0x349889(0x99))/0x1+-parseInt(_0x349889(0x80))/0x2+-parseInt(_0x349889(0xa0))/0x3*(-parseInt(_0x349889(0xa3))/0x4)+parseInt(_0x349889(0x7d))/0x5*(-parseInt(_0x349889(0x6f))/0x6)+parseInt(_0x349889(0x8e))/0x7+parseInt(_0x349889(0x79))/0x8+-parseInt(_0x349889(0xbf))/0x9;if(_0x191033===_0x5c646c)break;else _0x536ee5['push'](_0x536ee5['shift']());}catch(_0x1c0e18){_0x536ee5['push'](_0x536ee5['shift']());}}}(_0xd436,0x91e7c));import{db,collection,doc,getDoc,updateDoc,deleteDoc,getDocs,setDoc,addDoc,onSnapshot,auth,query,orderBy,serverTimestamp,limit,startAfter}from'/assets/js/obfuscated/firebaseInit.js';function _0xd436(){const _0x533bd8=['history','\x20is\x20in\x20checkmate.','hidden','position','san','Error\x20saving\x20move\x20data:\x20','map','classList','Insufficient\x20tokens!','Game\x20state\x20updated\x20successfully!','fen','click','moveTimestamp','finishedGames','add','15593778XEjsiz','none','User\x20tokens\x20updated\x20successfully!','then','Game\x20ID\x20added\x20to\x20the\x20document\x20successfully','Board\x20is\x20locked!','users','style','white','ref','in_check','lockUntil','Error\x20updating\x20game\x20state:\x20','Error\x20getting\x20game\x20data:\x20','addEventListener','removeItem','catch','84330DMLHOq','assets/img/chesspieces/wikipedia/{piece}.png','myBoard','insufficientTokensModal','in_checkmate','getTime','exists','sort','load','block','8347752ugtwpq','search','docs','games','20KKOcbE','Moves\x20cleared\x20successfully!','No\x20current\x20game\x20data\x20found!','1078654RjjTTS','reset','Game\x20over,\x20drawn\x20position','length','data','turn','log','resetMove','error','.square-','Move\x20data\x20saved\x20successfully!','email','remove','disabled','7852908BvkfVG','uid','getElementById','textContent','No\x20move\x20to\x20make!','move','displayName','make\x20a\x20move\x20clicked','in_draw','highlight-move','from','92722RqdWpD','New\x20game\x20started\x20successfully!','Error\x20processing\x20game\x20end:\x20','Board\x20is\x20not\x20locked!','tokens','Board\x20locked\x20until:\x20','Error\x20updating\x20user\x20tokens:\x20','232698VtuoVm','White','querySelector','44nyqQLP','Error\x20getting\x20user\x20tokens:\x20','chessboard-loader','game_over','snapback','display','Black','moves','currentGame','\x20to\x20move','userTokens','onAuthStateChanged','lastMove'];_0xd436=function(){return _0x533bd8;};return _0xd436();}import{fetchMoves,fetchAllFinishedGames,startBoardTimeCountdown,updateTokens,shareTwitter,moveProgress}from'/assets/js/obfuscated/handleHtml.js';function _0x493b(_0x421eb8,_0x236bce){const _0xd436bc=_0xd436();return _0x493b=function(_0x493b8d,_0x342ebe){_0x493b8d=_0x493b8d-0x6f;let _0x4ce656=_0xd436bc[_0x493b8d];return _0x4ce656;},_0x493b(_0x421eb8,_0x236bce);}auth[_0x5a1a74(0xae)](function(_0x505d0b){const _0xef0a05=_0x5a1a74;if(_0x505d0b){sessionStorage[_0xef0a05(0xce)]('sessionId'),updateTokens(_0x505d0b);var _0x338aaf;_0x505d0b[_0xef0a05(0x94)]?_0x338aaf=_0x505d0b[_0xef0a05(0x94)]:_0x338aaf=_0x505d0b[_0xef0a05(0x8b)];var _0xe61473=null;let _0x373d54=null;var _0x3e4643=new Chess();onSnapshot(doc(db,_0xef0a05(0x7c),'currentGame'),_0x5f5a46=>{const _0x2edeef=_0xef0a05;if(_0x5f5a46[_0x2edeef(0x75)]()){const _0x922a34=_0x5f5a46[_0x2edeef(0x84)]();_0x3e4643[_0x2edeef(0x77)](_0x922a34[_0x2edeef(0xba)]);const _0x3049c3=_0x3e4643[_0x2edeef(0x85)](),_0x155b0e=_0x3049c3==='w'?_0x2edeef(0xc7):'black';_0xe61473['orientation'](_0x155b0e),_0xe61473[_0x2edeef(0xb3)](_0x922a34[_0x2edeef(0xba)]),_0x373d54=null,moveProgress(![]);if(_0x922a34[_0x2edeef(0xaf)]){const _0x50cdfc=_0x922a34['lastMove'],_0x421b5f=_0x50cdfc[_0x2edeef(0x98)],_0x150788=_0x50cdfc['to'],_0x3a71d9=document[_0x2edeef(0xa2)]('.square-'+_0x421b5f),_0x2c7c78=document[_0x2edeef(0xa2)](_0x2edeef(0x89)+_0x150788);_0x3a71d9['classList'][_0x2edeef(0xbe)](_0x2edeef(0x97)),_0x2c7c78[_0x2edeef(0xb7)][_0x2edeef(0xbe)](_0x2edeef(0x97));}if(_0x922a34['lockUntil']){const _0x52dd47=_0x922a34['lockUntil'],_0x320bf2=new Date()['getTime']();_0x320bf2<_0x52dd47?(console[_0x2edeef(0x86)](_0x2edeef(0xc4)),startBoardTimeCountdown(_0x922a34),document['getElementById']('chessboard-loader')[_0x2edeef(0xc6)][_0x2edeef(0xa8)]=_0x2edeef(0xc0),document[_0x2edeef(0x90)]('myBoard')[_0x2edeef(0xc6)][_0x2edeef(0xa8)]=_0x2edeef(0x78)):(console[_0x2edeef(0x86)](_0x2edeef(0x9c)),document[_0x2edeef(0x90)](_0x2edeef(0xa5))[_0x2edeef(0xc6)]['display']=_0x2edeef(0xc0),document[_0x2edeef(0x90)](_0x2edeef(0x71))['style'][_0x2edeef(0xa8)]=_0x2edeef(0x78));}else console[_0x2edeef(0x86)](_0x2edeef(0x9c)),document[_0x2edeef(0x90)](_0x2edeef(0xa5))[_0x2edeef(0xc6)]['display']=_0x2edeef(0xc0),document['getElementById'](_0x2edeef(0x71))[_0x2edeef(0xc6)][_0x2edeef(0xa8)]=_0x2edeef(0x78);}else console[_0x2edeef(0x86)](_0x2edeef(0x7f));}),document[_0xef0a05(0x90)]('makeAMove')[_0xef0a05(0x8d)]=!![],document[_0xef0a05(0x90)]('makeAMove')[_0xef0a05(0xcd)](_0xef0a05(0xbb),function(){const _0x11bc9c=_0xef0a05;console['log'](_0x11bc9c(0x95));if(_0x373d54){const _0x4b6bae=doc(db,_0x11bc9c(0xc5),_0x505d0b[_0x11bc9c(0x8f)]);getDoc(_0x4b6bae)[_0x11bc9c(0xc2)](_0x5c23f6=>{const _0x4170d5=_0x11bc9c,_0x56c56e=_0x5c23f6[_0x4170d5(0x84)](),_0x50f2c7=_0x56c56e[_0x4170d5(0x9d)];if(_0x50f2c7>=0x1){const _0x1f7b52=doc(db,'games',_0x4170d5(0xab));getDoc(_0x1f7b52)['then'](_0x44e3fc=>{const _0x511954=_0x4170d5,_0xe7ccdb=_0x44e3fc[_0x511954(0x84)]();if(_0xe7ccdb[_0x511954(0xca)]){const _0x52ecf2=new Date()[_0x511954(0x74)]();if(_0x52ecf2<_0xe7ccdb[_0x511954(0xca)]){console[_0x511954(0x86)]('Board\x20is\x20already\x20locked!');return;}else{const _0x199cd6=new Date()[_0x511954(0x74)]()+0x3a98;_0x3e4643[_0x511954(0x93)](_0x373d54);const _0x51bfbd=_0x3e4643[_0x511954(0xb0)]({'verbose':!![]}),_0x4c259c=_0x51bfbd[_0x51bfbd[_0x511954(0x83)]-0x1],_0x40d7f9=_0x4c259c[_0x511954(0xb4)];console['log']('Last\x20move\x20generated:\x20',_0x4c259c);const _0x1c5123={'move':_0x40d7f9,'playerHandle':_0x338aaf,'moveTimestamp':new Date()[_0x511954(0x74)]()};addDoc(collection(db,_0x511954(0xaa)),_0x1c5123)['then'](()=>{const _0xc57fe9=_0x511954;console[_0xc57fe9(0x86)](_0xc57fe9(0x8a));})['catch'](_0x4da026=>{const _0x37f0cd=_0x511954;console[_0x37f0cd(0x88)](_0x37f0cd(0xb5),_0x4da026);}),setDoc(doc(db,'games',_0x511954(0xab)),{'fen':_0x3e4643['fen'](),'lastMove':_0x373d54,'lockUntil':_0x199cd6})[_0x511954(0xc2)](()=>{const _0x45e857=_0x511954;console[_0x45e857(0x86)]('Game\x20state\x20updated\x20successfully!'),console[_0x45e857(0x86)](_0x45e857(0x9e),_0x199cd6);})[_0x511954(0xcf)](_0x32a055=>{const _0x2c3f65=_0x511954;console[_0x2c3f65(0x88)]('Error\x20updating\x20game\x20state:\x20',_0x32a055);}),_0xe61473[_0x511954(0xb3)](_0x3e4643[_0x511954(0xba)]()),_0x373d54=null,moveProgress(![]),_0x4e83ea(),shareTwitter(),_0x56c56e[_0x511954(0x9d)]=_0x50f2c7-0x1,updateDoc(_0x4b6bae,_0x56c56e)[_0x511954(0xc2)](()=>{const _0x5b630c=_0x511954;console[_0x5b630c(0x86)]('User\x20tokens\x20updated\x20successfully!'),document[_0x5b630c(0x90)](_0x5b630c(0xad))['textContent']=_0x56c56e[_0x5b630c(0x9d)],updateTokens(_0x505d0b);})[_0x511954(0xcf)](_0x218cd8=>{const _0x205b8e=_0x511954;console[_0x205b8e(0x88)]('Error\x20updating\x20user\x20tokens:\x20',_0x218cd8);}),console[_0x511954(0x86)](_0x511954(0x9c));}}else{const _0xe913b6=new Date()[_0x511954(0x74)]()+0x3e8;_0x56c56e[_0x511954(0x9d)]=_0x50f2c7-0x1,updateDoc(_0x4b6bae,_0x56c56e)[_0x511954(0xc2)](()=>{const _0xea7b7a=_0x511954;console[_0xea7b7a(0x86)](_0xea7b7a(0xc1)),document[_0xea7b7a(0x90)]('userTokens')[_0xea7b7a(0x91)]=_0x56c56e[_0xea7b7a(0x9d)];})['catch'](_0x4405cb=>{const _0x3c4f6b=_0x511954;console['error'](_0x3c4f6b(0x9f),_0x4405cb);}),_0x3e4643[_0x511954(0x93)](_0x373d54);const _0x13e9b6=_0x3e4643[_0x511954(0xb0)]({'verbose':!![]}),_0x3a2e54=_0x13e9b6[_0x13e9b6['length']-0x1],_0x7d693a=_0x3a2e54[_0x511954(0xb4)];console['log']('Last\x20move\x20generated:\x20',_0x3a2e54);const _0xf8646f={'move':_0x7d693a,'playerHandle':_0x338aaf,'moveTimestamp':new Date()['getTime']()};addDoc(collection(db,'moves'),_0xf8646f)['then'](()=>{const _0x2bfe20=_0x511954;console[_0x2bfe20(0x86)](_0x2bfe20(0x8a));})['catch'](_0x2f6980=>{const _0x5273eb=_0x511954;console[_0x5273eb(0x88)](_0x5273eb(0xb5),_0x2f6980);}),setDoc(doc(db,_0x511954(0x7c),'currentGame'),{'fen':_0x3e4643['fen'](),'lastMove':_0x373d54,'lockUntil':_0xe913b6})[_0x511954(0xc2)](()=>{const _0x49c045=_0x511954;console[_0x49c045(0x86)](_0x49c045(0xb9)),console[_0x49c045(0x86)](_0x49c045(0x9e),_0xe913b6);})[_0x511954(0xcf)](_0xf0375a=>{const _0x195d0a=_0x511954;console[_0x195d0a(0x88)](_0x195d0a(0xcb),_0xf0375a);}),_0xe61473[_0x511954(0xb3)](_0x3e4643[_0x511954(0xba)]()),_0x373d54=null,moveProgress(![]),_0x4e83ea(),shareTwitter(),console[_0x511954(0x86)](_0x511954(0x9c));}})[_0x4170d5(0xcf)](_0xf4dbd5=>{const _0x39adfe=_0x4170d5;console[_0x39adfe(0x88)](_0x39adfe(0xcc),_0xf4dbd5);});}else console['log'](_0x4170d5(0xb8)),document[_0x4170d5(0x90)]('insufficientTokensModal')[_0x4170d5(0xb7)][_0x4170d5(0x8c)](_0x4170d5(0xb2)),document['getElementById'](_0x4170d5(0x72))[_0x4170d5(0xb7)][_0x4170d5(0xbe)]('show');})[_0x11bc9c(0xcf)](_0x1746b2=>{const _0x3d9f39=_0x11bc9c;console[_0x3d9f39(0x88)](_0x3d9f39(0xa4),_0x1746b2);});}else console[_0x11bc9c(0x86)](_0x11bc9c(0x92));}),document[_0xef0a05(0x90)](_0xef0a05(0x87))[_0xef0a05(0x8d)]=!![],document['getElementById'](_0xef0a05(0x87))[_0xef0a05(0xcd)](_0xef0a05(0xbb),function(){const _0x319c48=_0xef0a05;_0x373d54&&(_0xe61473['position'](_0x3e4643[_0x319c48(0xba)]()),_0x373d54=null,moveProgress(![]));});function _0x26e7fd(_0x170542,_0x5ac45a,_0x24fc76,_0x55c4da){const _0x426bd6=_0xef0a05;if(_0x3e4643[_0x426bd6(0xa6)]())return![];if(_0x3e4643['turn']()==='w'&&_0x5ac45a[_0x426bd6(0x7a)](/^b/)!==-0x1||_0x3e4643[_0x426bd6(0x85)]()==='b'&&_0x5ac45a[_0x426bd6(0x7a)](/^w/)!==-0x1)return![];if(_0x373d54)return![];}function _0x23c5f3(_0x431330,_0x3ee3b2){const _0x3688a9=_0xef0a05;var _0x504cf5={'from':_0x431330,'to':_0x3ee3b2,'promotion':'q'};if(_0x3e4643['move'](_0x504cf5))_0x3e4643['undo'](),_0x373d54=_0x504cf5,moveProgress(!![]);else return _0x3688a9(0xa7);}async function _0x48dce(){const _0x1df1a6=_0xef0a05,_0x2d8cd5=await getDocs(collection(db,_0x1df1a6(0xaa)));let _0x5c6f43=_0x2d8cd5[_0x1df1a6(0x7b)][_0x1df1a6(0xb6)](_0x72080d=>_0x72080d['data']());_0x5c6f43[_0x1df1a6(0x76)]((_0x537258,_0x5b5382)=>_0x537258[_0x1df1a6(0xbc)]-_0x5b5382[_0x1df1a6(0xbc)]);const _0x3c16b7={'fen':_0x3e4643['fen'](),'moves':_0x5c6f43,'endedAt':new Date()[_0x1df1a6(0x74)](),'lastMoveBy':_0x338aaf};try{const _0x332abd=await addDoc(collection(db,_0x1df1a6(0xbd)),_0x3c16b7);console[_0x1df1a6(0x86)]('Finished\x20game\x20saved\x20successfully!',_0x332abd['id']),await updateDoc(_0x332abd,{'gameId':_0x332abd['id']}),console[_0x1df1a6(0x86)](_0x1df1a6(0xc3));for(let _0x330e66 of _0x2d8cd5['docs']){await deleteDoc(_0x330e66[_0x1df1a6(0xc8)]);}console['log'](_0x1df1a6(0x7e)),_0x3e4643[_0x1df1a6(0x81)](),await setDoc(doc(db,_0x1df1a6(0x7c),'currentGame'),{'fen':_0x3e4643[_0x1df1a6(0xba)](),'lastMove':null}),console[_0x1df1a6(0x86)](_0x1df1a6(0x9a)),fetchMoves(),_0xe61473['start']();}catch(_0x5a3911){console['error'](_0x1df1a6(0x9b),_0x5a3911);}}function _0x4e83ea(){const _0x192470=_0xef0a05;var _0x286e58='',_0x5adc3f=_0x192470(0xa1);_0x3e4643['turn']()==='b'&&(_0x5adc3f=_0x192470(0xa9));if(_0x3e4643[_0x192470(0x73)]()||_0x3e4643['in_draw']()){if(_0x3e4643[_0x192470(0x73)]())_0x286e58='Game\x20over,\x20'+_0x5adc3f+_0x192470(0xb1);else _0x3e4643[_0x192470(0x96)]()&&(_0x286e58=_0x192470(0x82));_0x48dce(),fetchAllFinishedGames();}else _0x286e58=_0x5adc3f+_0x192470(0xac),_0x3e4643[_0x192470(0xc9)]()&&(_0x286e58+=',\x20'+_0x5adc3f+'\x20is\x20in\x20check');console[_0x192470(0x86)](_0x286e58);}var _0x62ecbc={'pieceTheme':_0xef0a05(0x70),'draggable':!![],'position':'start','onDragStart':_0x26e7fd,'onDrop':_0x23c5f3};_0xe61473=Chessboard(_0xef0a05(0x71),_0x62ecbc);}else console[_0xef0a05(0x86)]('No\x20user\x20signed\x20in!');});